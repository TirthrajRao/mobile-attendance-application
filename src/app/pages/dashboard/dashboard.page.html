<ion-header *ngIf="data">
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-menu-button menu="main-menu"></ion-menu-button>
		</ion-buttons>
		<ion-title>
			Dashboard
		</ion-title>
	</ion-toolbar>

</ion-header>

<ion-content color="primary" *ngIf="data">
	<div class="header pt-5">
		<ion-card (click)="fillAttendance()" class="m-3" style="height: 132px; ">
			<ion-card-header>
				<div class="container-fluid">
					<div class="row">
						<div class="col p-0">
							<ion-card-subtitle>
								<p class="h6 card-title text-uppercase text-muted mb-1">Fill Attendance</p>
								<p *ngIf="!filledAttendanceLog" class="h6 text-danger">You are left with your today's attendance !!!</p>
								<p *ngIf="filledAttendanceLog && entry" class="h6 card-text text-success">You filled your attendance</p>	
								<p *ngIf="filledAttendanceLog && exit" class="h6 card-text  text-danger">Start the time log if you wish to work again !!!</p>
							</ion-card-subtitle>
						</div>
					</div>
				</div>
			</ion-card-header>

			<ion-card-content>
				<p class="cart-footer-text mb-0 mt-3 text-muted text-sm" *ngIf="entry">
					<span class="text-nowrap">Your Entry Time :</span>
					<span class="text-success mr-2"> {{entry}} </span>
				</p>
				<p class="cart-footer-text mb-0 text-muted text-sm" *ngIf="exit">
					<span class="text-nowrap">Your Exit Time :</span>
					<span class="text-danger mr-2"> {{exit}} </span>
				</p>
			</ion-card-content>
		</ion-card>

		<ion-card class="mt-5 m-3" >
			<ion-card-header>
				<ion-card-subtitle>
					<h5 class="mb-0 text-muted">Week Summary </h5>

				</ion-card-subtitle>
			</ion-card-header>

			<ion-card-content class="p-0">
				<div class="table-responsive">
					<table class="table align-items-center table-flush">
						<thead class="thead-light">
							<tr>
								<th scope="col">Date</th>
								<th scope="col">day</th>
								<th scope="col">Hr Worked</th>
							</tr>
						</thead>
						<tbody>
							<ng-container>
								<div id="clock"></div>
								<tr *ngFor="let data of fiveDaysLogs ; let i = index" id="viewMore" (click)="openModel(i)">
									<th scope="row">
										{{ data.date }}
									</th>
									<td>
										{{data.day}}
									</td>
									<td>
										{{data.diffrence}}
									</td>
								</tr>
							</ng-container>
						</tbody>
					</table>
				</div>
			</ion-card-content>
		</ion-card>
	</div>

	<!-- The Modal -->
	<div class="modal fade" id="myModal" >
		<div class="modal-dialog modal-dialog-centered">
			<div class="modal-content text-dark">
				
				<!-- Modal Header -->
				<div class="modal-header" *ngIf="modelValue">
					<h5 class="modal-title">{{modelValue.day}} &nbsp;-&nbsp; {{modelValue.date}}</h5>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>

				<!-- Modal body -->
				<div class="modal-body" *ngIf="modelValue">
					<h5 align="center" class="mb-1"><u>Time log </u></h5>
					<div class="form-group" style="overflow: auto;  max-height: 350px">
						<table align="center "  style="width: 100% " cellpadding="10px" *ngIf="modelValue">
							<tr align="center">
								<th>No.</th> 
								<th>In</th>
								<th>Out</th>
							</tr>
							<tr *ngFor="let time of modelValue.timeLog ; let i = index" align="center"> 
								<td>{{i+1}}</td>
								<td>{{time.in}}</td>
								<td>{{time.out}}</td>
							</tr>
						</table>
					</div>

				</div>

				<!-- Modal footer -->
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
				</div>

			</div>
		</div>
	</div>

</ion-content>



<ion-header *ngIf="!data">
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-menu-button menu="main-menu"></ion-menu-button>
		</ion-buttons>
		<ion-title>
			Dashboard
		</ion-title>
	</ion-toolbar>

</ion-header>

<ion-content color="primary" *ngIf="!data">
	<div class="header pt-5">
		<ion-card (click)="fillAttendance()" class="m-3" style="height: 132px; ">
			<ion-card-header>
				<div class="container-fluid">
					<div class="row">
						<div class="col p-0">
							<ion-card-subtitle>
								<p class="h6 card-title text-uppercase text-muted mb-1">
									<ion-skeleton-text animated style="width: 45%; height: 14px;"></ion-skeleton-text>
								</p>
								<p *ngIf="!filledAttendanceLog" class="h6 text-danger">
									<ion-skeleton-text animated style="width: 90%; height: 14px;"></ion-skeleton-text>
									<ion-skeleton-text animated style="width: 45%; height: 14px;"></ion-skeleton-text>
								</p>
								<p *ngIf="filledAttendanceLog && entry" class="h6 card-text text-success">
									<ion-skeleton-text animated style="width: 80%; height: 14px;"></ion-skeleton-text>
								</p>	
								<p *ngIf="filledAttendanceLog && exit" class="h6 card-text  text-danger">
									<ion-skeleton-text animated style="width: 90%; height: 14px;"></ion-skeleton-text>
									<ion-skeleton-text animated style="width: 40%; height: 14px;"></ion-skeleton-text>
								</p>
							</ion-card-subtitle>
						</div>
					</div>
				</div>
			</ion-card-header>

			<ion-card-content>
				<p class="cart-footer-text mb-0 mt-4 text-muted text-sm" *ngIf="entry">
					<span class="text-success mr-2">
						<ion-skeleton-text animated style="width: 75%; height: 14px;"></ion-skeleton-text>
					</span>
				</p>
				<p class="cart-footer-text mb-0 mt-4 text-muted text-sm" *ngIf="exit">
					<span class="text-danger mr-2">
						<ion-skeleton-text animated style="width: 75%; height: 14px;"></ion-skeleton-text>
					</span>
				</p>
			</ion-card-content>
		</ion-card>

		<ion-card class="mt-5 m-3" >
			<ion-card-header>
				<ion-card-subtitle>
					<h5 class="mb-0 text-muted">
						<ion-skeleton-text animated style="width: 50%; height: 16px;"></ion-skeleton-text>
					</h5>

				</ion-card-subtitle>
			</ion-card-header>

			<ion-card-content class="p-0">
				<div class="table-responsive">
					<table class="table align-items-center table-flush">
						<thead class="thead-light">
							<tr>
								<th scope="col">
									<ion-skeleton-text animated style="width: 45%; height: 14px;"></ion-skeleton-text>
								</th>
								<th scope="col">
									<ion-skeleton-text animated style="width: 45%; height: 14px;"></ion-skeleton-text>
								</th>
								<th scope="col">
									<ion-skeleton-text animated style="width: 60%; height: 14px;"></ion-skeleton-text>
								</th>
							</tr>
						</thead>
						<tbody>
							<ng-container>
								<div id="clock"></div>
								<tr *ngFor="let data of dates ; let i = index">
									<td scope="row">
										{{data.date}}
									</td>
									<td>
										{{data.day}}
									</td>
									<td>
										{{data.lastLog}}
									</td>
								</tr>
							</ng-container>
						</tbody>
					</table>
				</div>
			</ion-card-content>
		</ion-card>
	</div>
</ion-content>



